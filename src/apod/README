# Notes for an entire download and solve of the APOD images to date.
# by David W. Hogg, 2008-01

# 0. I svn co'ed the astrometry.net codebase into $HOME/astrometry/.
#    I added $HOME/astrometry/src/apod to the end of my path.

# 1. I unpacked and made the tarball from astrometry.net.  I installed
#    the executables in $HOME/scr/astrometry/bin/ and everything else in
#    the sensible places given that.  I added $HOME/scr/astrometry/bin to
#    the end of my path.

# 2. I got *all* the indices, and installed them *all* in the data
#    directory and unchecked all but the 201 and 200 indices in
#    $HOME/scr/astrometry/etc/backend.cfg

# 3. I got *all of the APOD data with
     mkdir -p $HOME/scr/apod
     cd $HOME/scr/apod
     apod_wget
#    ( this took a while )

# 4. I rearranged the APOD image data into a sane structure with
     cd $HOME/scr/apod
     export APOD_ROOT=$HOME/scr/apod/apod.nasa.gov/apod
     apod_rearrange
#    ( this creates large numbers of directories like "$cwd/2007/03/17" )

# 5. I calibrated everything with
     cd $HOME/scr/apod
     (apod_calibrate 30 300 0-19 > apod+1.5.20.log 2> apod+1.5.err.20.log ; \
       apod_calibrate 10 40 0-19 > apod+1.0.20.log 2> apod+1.0.err.20.log ; \
       apod_calibrate 3 12 0-19 > apod+0.5.20.log 2> apod+0.5.err.20.log) &
     (apod_calibrate 1 4 0-19 > apod+0.0.20.log 2> apod+0.0.err.20.log ; \
       apod_calibrate 0.3 1.2 0-19 > apod-0.5.20.log 2> apod-0.5.err.20.log) &
     (apod_calibrate 0.1 0.4 0-19 > apod-1.0.20.log 2> apod-1.0.err.20.log ; \
       apod_calibrate 0.03 0.12 0-19 > apod-1.5.20.log 2> apod-1.5.err.20.log) &

     (apod_calibrate 30 300 20-29 > apod+1.5.30.log 2> apod+1.5.err.30.log ; \
       apod_calibrate 10 40 20-29 > apod+1.0.30.log 2> apod+1.0.err.30.log ; \
       apod_calibrate 3 12 20-29 > apod+0.5.30.log 2> apod+0.5.err.30.log) &
     (apod_calibrate 1 4 20-29 > apod+0.0.30.log 2> apod+0.0.err.30.log ; \
       apod_calibrate 0.3 1.2 20-29 > apod-0.5.30.log 2> apod-0.5.err.30.log) &
     (apod_calibrate 0.1 0.4 20-29 > apod-1.0.30.log 2> apod-1.0.err.30.log ; \
       apod_calibrate 0.03 0.12 20-29 > apod-1.5.30.log 2> apod-1.5.err.30.log) &

     (apod_calibrate 30 300 30-39 > apod+1.5.40.log 2> apod+1.5.err.40.log ; \
       apod_calibrate 10 40 30-39 > apod+1.0.40.log 2> apod+1.0.err.40.log ; \
       apod_calibrate 3 12 30-39 > apod+0.5.40.log 2> apod+0.5.err.40.log) &
     (apod_calibrate 1 4 30-39 > apod+0.0.40.log 2> apod+0.0.err.40.log ; \
       apod_calibrate 0.3 1.2 30-39 > apod-0.5.40.log 2> apod-0.5.err.40.log) &
     (apod_calibrate 0.1 0.4 30-39 > apod-1.0.40.log 2> apod-1.0.err.40.log ; \
       apod_calibrate 0.03 0.12 30-39 > apod-1.5.40.log 2> apod-1.5.err.40.log) &
