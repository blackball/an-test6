##UPLOAD_IDENTIFIER##

<script type="text/javascript">
<!--
function setXysrcUrl() {
  var u = document.getElementById("##xysrc-url-id##");
  u.checked = 1;
}
function setXysrcImg() {
  var u = document.getElementById("##xysrc-img-id##");
  u.checked = 1;
}
function setXysrcFits() {
  var u = document.getElementById("##xysrc-fits-id##");
  u.checked = 1;
}
function setFsUl() {
  var u = document.getElementById("##fstype-ul-id##");
  u.checked = 1;
}
function setFsEv() {
  var u = document.getElementById("##fstype-ev-id##");
  u.checked = 1;
}
function validate_form() {
  var u1 = document.getElementById("##xysrc-url-id##");
  var u2 = document.getElementById("##xysrc-img-id##");
  var u3 = document.getElementById("##xysrc-fits-id##");
  if (!(u1.checked || u2.checked || u3.checked))
    return false;
  u1 = document.getElementById("##fstype-ul-id##");
  u2 = document.getElementById("##fstype-ev-id##");
  if (!(u1.checked || u2.checked))
    return false;
  if (u1.checked) {
	v1 = document.getElementsByName("fsl");
	v1 = v1[0];
	v2 = document.getElementsByName("fsu");
	v2 = v2[0];
	if (v1.value == '' || v2.value == '')
	  return false;
  } else {
	v1 = document.getElementsByName("fse");
	v1 = v1[0];
	v2 = document.getElementsByName("fsv");
	v2 = v2[0];
	if (v1.value == '' || v2.value == '')
	  return false;
  }
  return true;
}
function showUploadMeter() {
  // only pop up the progress meter window if the form validates...
  if (validate_form()) {
    var id = '##upload-id##';
	window.open('upload-progress.php?id=' + id, 'Upload_Meter',
	            'width=400,height=200,status=no', true);
  }
}
// -->
</script>

<div id="tablebox">

<div id="leftbox">
<h3>Required Information</h3>

<div class="err">
##email-err##
</div>
<p>
Identification
</p>
<div class="cap">
##email-caption##
</div>
<table id="name_email">
<tr><td>Email:</td><td>##email##</td></tr>
<tr><td>Name:</td><td>##uname##</td></tr>
</table>

<div class="err">
##xysrc-err##
</div>

<p>
Field to solve: select one of the following:
</p>

<div class="cap">
In order to solve your field, we need either an image of your
field (as a FITS, JPEG, GIF, PNG file or a URL); OR a list of star
positions (as a FITS binary table).
</div>

<table id="xysrc">

<tr>
<td>##xysrc-img##</td>
<td>
<div class="err" id="imgfile-err">
##imgfile-err##
</div>
Image file:
##imgfile##
<div class="cap">
Your JPEG, GIF, PNG, or FITS image.  Must be less than ##sizelimit## MB!
</div>
</td>
</tr>

##imgfile_set##

<tr>
<td>##xysrc-url##</td>
<td>
<div class="err" id="imgurl-err">##imgurl-err##</div>
Image URL:
##imgurl##
<div class="cap">
The URL of a JPEG, GIF, PNG, or FITS image.  Must be less than ##sizelimit## MB!
</div>
</td>
</tr>

<tr>
<td>##xysrc-fits##</td>
<td>FITS binary table:
<div class="cap">
Must contain a BINTABLE of detected objects, with X and Y
pixel positions in "D" (double) or "E" (float) columns, with
one object per row.
The rows must be sorted by brightness with 
the brightest object first.
</div>

<div class="err" id="fitsfile-err">##fitsfile-err##</div>
<div class="err" id="x-col-err">##x_col-err##</div>
<div class="err" id="y-col-err">##y_col-err##</div>
<ul>
  <li>FITS file: ##fitsfile##</li>
##fitsfile_set##
  <li>X Column name: ##x_col##</li>
  <li>Y	Column name: ##y_col##</li>
</ul>
</td>
</tr>
</table>




<p>
Scale of the image:
</p>
<div class="cap" id="scalecap">
If you provide an estimate of the size of your field, our search will be much
faster.  <i>(Note, this only speeds the search, it doesn't make your image more likely
to solve.)</i>  If you have <b>no idea</b>, try 0.1 to 180 degrees.  Most digital-camera
images are at least 10 degrees wide; most professional-grade telescopes are narrower
than 2 degrees.
</div>

<ul id="scalelist">
<li>Units: ##fsunit##
<div class="cap">
Choose how you want to describe the scale of your field.
</div>
</li>

<li>
<div class="err">
##fs-err##
</div>
<div class="err" id="fstype-err">
##fstype-err##
</div>
Values:
<div class="cap">
Fill in ONE of the following pairs of values:
</div>

<table>
<tr><td>

<div class="fuset" id="lu">
<div class="err" id="fsl-err">##fsl-err##</div>
<div class="err" id="fsu-err">##fsu-err##</div>
<table>
<tr>
<td colspan="2">##fstype-ul## Bounds</td>
</tr>
<tr>
<td>Lower bound:</td>
<td>##fsl##</td>
</tr>
<tr>
<td>Upper bound:</td>
<td>##fsu##</td>
</tr>
</table>
</div>

</td><td>

<div class="fuset" id="ev">
<div class="err" id="fse-err">##fse-err##</div>
<div class="err" id="fsv-err">##fsv-err##</div>
<table>
<tr>
<td colspan="2">##fstype-ev## Estimate+/-Error</td>
</tr>
<tr>
<td>Estimate:</td>
<td>##fse##</td>
</tr>
<tr>
<td>% Error:</td>
<td>##fsv##</td>
</tr>
</table>
</div>

</td></tr>
</table>

</li>
</ul>

</div><!-- end leftbox -->


<div id="optbox">
<h3>Optional Settings</h3>
<p>
Parity of your image
</p>
<div class="cap">
Flipping an image reverses its "parity".  If you point a digital camera at the
sky and submit the JPEG, it probably has negative parity.  If you have a
FITS image, it probably has positive parity.  Selecting the right parity
will make the solving process run faster, but if in doubt just try both.
</div>

<ul id="paritylist">
<li>##parity-both## Try both parities simultaneously</li>
<li>##parity-right## Positive parity image</li>
<li>##parity-left##  Negative parity image</li>
</ul>

<p>
Index to use
</p>
<div class="cap">
We use indexes to solve your fields;
an index contains "landmarks" for the sky.
The solving process works best when the "landmarks" are a little
smaller than the size of the field to be solved.
We can automatically choose a suitable index based on your pixel scale estimate,
or you can select one here.
</div>

<ul id="indexlist"><li>##index##</li></ul>

<p>
Star positional error
</p>
<div class="cap">
When we find a matching "landmark", we check to see how many of
the stars in your field match up with stars we know about.
To do this, we need to know how much a star in your field could
have moved from where it should be.
</div>

<div class="err" id="poserr">##poserr-err##</div>
<ul id="poserrlist"><li>Positional error, in pixels: ##poserr##</li></ul>

<p>
Tweak
</p>
<div class="cap">
After we find a correct match, we can run a "Tweak" process
which tries to fine-tune the World Coordinate System transformation
by computing polynomial SIP correction terms.
Sometimes this process actually makes the solution worse - we are
working on an improved version.
</div>

<div class="err" id="tweakordererr">##tweak_order-err##</div>
<ul id="tweaklist">
<li>##tweak## Tweak</li>
<li>Tweak polynomial order: ##tweak_order##</li>
</ul>

</div>



</div><!-- end tablebox -->

<div id="bottombox">
<p>
##submit##
</p>
</div>


<div id="linkhereandresetbox">
<div id="linkherebox">
<p>
##linkhere##
</p>
</div>

<div id="resetbox">
<p>
##reset##
</p>
</div>
</div>

<div id="clearbox">
</div>

<div>
<!-- the MAX_FILE_SIZE input needs to be in a paragraph, div, etc. -->
##MAX_FILE_SIZE##
</div>
