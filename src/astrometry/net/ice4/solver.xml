
<icegrid>
  <application name="Solver">



    <server-template id="ServerTemplate-scale10">
      <parameter name="index"/>
      <server id="Server-${index}-scale10"
              exe="python"
              activation="always">
        <option>SolverServer.py</option>
        <option>10</option>
        <adapter name="OneSolver" endpoints="tcp"
         replica-group="RSolver-scale10"/>
        <property name="Identity" value="Solver-scale10"/>
        <property name="Ice.ThreadPool.Server.SizeMax" value="10"/>
        </server>
    </server-template>


    <server-template id="ServerTemplate-scale5">
      <parameter name="index"/>
      <server id="Server-${index}-scale5"
              exe="python"
              activation="always">
        <option>SolverServer.py</option>
        <option>5</option>
        <adapter name="OneSolver" endpoints="tcp"
         replica-group="RSolver-scale5"/>
        <property name="Identity" value="Solver-scale5"/>
        <property name="Ice.ThreadPool.Server.SizeMax" value="10"/>
        </server>
    </server-template>


    <server-template id="ServerTemplate-scale4">
      <parameter name="index"/>
      <server id="Server-${index}-scale4"
              exe="python"
              activation="always">
        <option>SolverServer.py</option>
        <option>4</option>
        <adapter name="OneSolver" endpoints="tcp"
         replica-group="RSolver-scale4"/>
        <property name="Identity" value="Solver-scale4"/>
        <property name="Ice.ThreadPool.Server.SizeMax" value="10"/>
        </server>
    </server-template>


    <replica-group id="RSolver-scale10">
      <load-balancing type="round-robin"/>
      <object identity="Solver-scale10" type="::SolverIce::Solver"/>
    </replica-group>
    

    <replica-group id="RSolver-scale5">
      <load-balancing type="round-robin"/>
      <object identity="Solver-scale5" type="::SolverIce::Solver"/>
    </replica-group>
    

    <replica-group id="RSolver-scale4">
      <load-balancing type="round-robin"/>
      <object identity="Solver-scale4" type="::SolverIce::Solver"/>
    </replica-group>
    

    <node name="hydra">


      <server-instance template="ServerTemplate-scale10" index="hydra"/>
      

      <server-instance template="ServerTemplate-scale5" index="hydra"/>
      

      <server-instance template="ServerTemplate-scale4" index="hydra"/>
      

    </node>

  </application>

</icegrid>

