graph indexpipeline2 {
	graph [ rankdir = LR ];
	node [ shape=box ];
	edge [ dir=forward ];
	node [ style=filled, fillcolor=azure2 ];
	objs [ label="Healpix-ified catalogue\n(.objs)" ];
	ckdt [ label="Code kd-tree\n(.ckdt)" ];
	quad [ label="Quads\n(.quad)" ];
	node [ style="" ];
	skdt [ label="Star kd-tree\n(.skdt)" ];
	qidx [ label="Quad Index\n(.qidx)" ];
	code [ label="Quad Codes\n(.code)" ];

	node [ shape=ellipse ];
	startree [ label="startree" ];
	allquads [ label="all_quads" ];
	codetree [ label="codetree" ];

	objs -- startree
	startree -- skdt
	skdt -- allquads
	allquads -- qidx
	allquads -- code
	allquads -- quad
	code -- codetree
	codetree -- ckdt
}

// render with:
//   dot -Tps2 -o pipeline.ps pipeline.dot
// to get bounding box:
//   gs -q -dNOPAUSE -dBATCH -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -sDEVICE=bbox pipeline.ps
// to render as png:
//   gs -q -dNOPAUSE -dBATCH -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -sDEVICE=png16m -sOutputFile=pipeline.png -g850x162 pipeline.ps
// (where 850x162 is determined by the output of the bounding-box stage)

/*
graph old_indexpipeline {
	node [ shape=box ];
	edge [ dir=forward ];
	objs [ label="Healpix-ified Catalogue\n(.objs)" ];
	skdt [ label="Star kd-tree\n(.skdt)" ];
	objs -- skdt [ label="startree" ];
	qidx [ label="Quad Index\n(.qidx)" ];
	code [ label="Quad Codes\n(.code)" ];
	quad [ label="Quads\n(.quad)" ];
	skdt -- qidx
	skdt -- code
	skdt -- quad [ label="all_quads" ];
	ckdt [ label="Code kd-tree\n(.ckdt)" ];
	code -- ckdt [ label="codetree" ];
}
*/