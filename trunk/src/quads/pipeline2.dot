graph solvepipeline {
	graph [ rankdir = LR ];
	node [ shape=box ];
	edge [ dir=forward ];
	node [ style=filled, fillcolor=lightyellow2 ];
	xyls [ label="Input field\n(.xyls)" ];
	subgraph cluster_0 {
		style=filled;
		color=lightgrey;
		node [ style=filled, fillcolor=azure2 ];
		objs [ label="Deduplicated catalogue\n(.objs)" ];
		ckdt [ label="Code kd-tree\n(.ckdt)" ];
		quad [ label="Quads\n(.quad)" ];
		node [ style=filled, fillcolor=white ];
		match [ label="Match list\n(.match)" ];

		node [ shape=ellipse ];
		slave [ label="slave" ];

		objs -- slave
		ckdt -- slave
		quad -- slave

		slave -- match
	} 
	xyls -- slave
	node [ shape=box fillcolor=white ];
	agree [ label="Match list\n(.agree)" ];
	hits [ label="Hits file\n(.hits)" ];
	
	node [ shape=ellipse ];
	match -- agreeable
	agreeable -- agree
	agreeable -- hits
}

// render with:
//   dot -Tps2 -o pipeline2.ps pipeline2.dot
// to get bounding box:
//   gs -q -dNOPAUSE -dBATCH -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -sDEVICE=bbox pipeline2.ps
// to render as png:
//   gs -q -dNOPAUSE -dBATCH -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -sDEVICE=png16m -sOutputFile=pipeline2.png -g355x225 pipeline2.ps
